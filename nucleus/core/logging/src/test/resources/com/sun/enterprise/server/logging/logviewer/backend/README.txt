package test.logging;

import java.io.BufferedOutputStream;
import java.io.FileOutputStream;
import java.io.ObjectOutputStream;

import com.sun.enterprise.server.logging.logviewer.backend.LogFile;

/**
  * The logentry.bin binary file was generated by serializing the object from GlassFish 3.1.2.2. 
  * The test reads the object back in the current release to verify it is still compatible.
  * Here is the test program which generated the binary file from the GF 3.1.2.2 release.
*/
public class LogFileEntryTest {

    /**
     * @param args
     */
    public static void main(String[] args) throws Exception {
        // TODO Auto-generated method stub
        FileOutputStream fos = new FileOutputStream("/tmp/logentry.bin");
        BufferedOutputStream buffer = new BufferedOutputStream(fos);
        ObjectOutputStream objectOutput = new ObjectOutputStream(buffer);
        // Create and initialize a LogEntry
        LogFile logFile = new LogFile("/tmp/server.log");
        LogFile.LogEntry entry = logFile.new LogEntry("[#|2012-11-08T13:42:26.763-0500|INFO|44.0|javax.enterprise.logging|_ThreadID=1;_ThreadName=main;_TimeMillis=1352400146763;_LevelValue=800;_MessageID=NCLS-LOGGING-00009;|Running GlassFish Version: Oracle GlassFish Server  4.0  (build sanshriv-private)|#]", 1L);
        entry.setRecordNumber(1L);
        objectOutput.writeObject(entry);
        objectOutput.flush();
        objectOutput.close();
    }

}

